<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup</title>
    <link rel="stylesheet" href="view/css/style.css" type="text/css" media="all" />
</head>
<body>
    <div class="Register">
        <div class="signup">
            <h1>Signup</h1>
            <input type="text" name="userR" id="userR" placeholder="Enter username" autocomplete="new-username"/>
            <input type="password" name="passR" id="passR" placeholder="Enter password" autocomplete="new-password"/>
            <button id="btnR" type="button">Sign Up</button>
            <div class="reply3"></div>
            <button id="btnLD"><a href="http://localhost:3000/login">Login?</a></button>
        </div>
    </div>
<script type="text/javascript" charset="utf-8">
          
     const passR = document.querySelector('#passR');
     const userR = document.querySelector('#userR');
    const logincontainer = document.querySelector('.container');
         const Register = document.querySelector('.Register');
         
         const reply3 = document.querySelector('.reply3');
         const regbtn = document.querySelector('#btnR');
       regbtn.addEventListener('click', () => {
    if(userR.value.trim() === "" || passR.value.trim() === "") {
        alert("Empty fields detected, you're banned!");
    } else {
        const reginfo = {
            username: userR.value,
            password: passR.value
        };
        fetch("/reg", {
            method: 'POST',
            headers: {'Content-Type' : 'application/json'},
            body: JSON.stringify(reginfo)
        }).then(response => response.text())
          .then(data => {
              const parsedData = JSON.parse(data);
              reply3.textContent = parsedData.message;  
          })
          .catch(error => {
              console.error('Problem with fetch operation:', error);
          });
    }
});
</script>
</body>
</html>
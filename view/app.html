<!DOCTYPE html>
<html>
     <head>
          <meta http-equiv="content-type" content="text/html; charset=utf-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>database fetch and update</title>
          <link rel="stylesheet" href="font-awesome/css/all.min.css">
          <link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
     </head>
     <body>
        
    <div class="MsgDiv"></div>
    <div class="input-wrapper">
         <textarea  type="text" name="userMsg" id="userMsg" placeholder="enter your message..."></textarea>
        <button type="button" id="msgbtn"><i class="fas fa-bolt" id="sendButton"></i> </button>
    </div>
<script type="text/javascript" charset="utf-8">
         const MsgDiv = document.querySelector('.MsgDiv');
         const userMsg = document.querySelector('#userMsg');
         
         //buttons
         const msgbtn = document.querySelector('#msgbtn');
         
         msgbtn.addEventListener('click', () => {
          fetch('/username').then(response => response.text()).then(username => {
          const userMsgs = userMsg.value;
         const name = username.value;
          const UsermsgObj = {
          Mesg: userMsgs,
          name : username
          }
           fetch('/MSG' , {
               
               method: 'POST',
               headers: {'Content-Type' : 'application/json'},
               body: JSON.stringify(UsermsgObj)
          }); 
          MsgDiv.textContent = userMsgs;
          userMsg.value = '';
          userMsg.focus();
          }).catch(error => {
               console.error(`error occurred ${error}`)
          });
         });
       
</script>
     </body>
</html>